resource "cloudamqp_vpc" "vpc_first" {
  name   = "{{or .VpcNameFirst `TestAccInstanceFirst`}}"
  region = "{{or .VpcRegionFirst `amazon-web-services::us-east-1`}}"
  subnet = "{{or .VpcSubnetFirst `10.56.72.0/24`}}"
  tags   = {{or .VpcTagsFirst `["terraform"]`}}
}

resource "cloudamqp_instance" "instance_first" {
	name   = "{{or .InstanceNameFirst `TestAccInstanceFirst`}}"
	plan   = "{{or .InstancePlanFirst `bunny-1`}}"
	region = "{{or .InstanceRegionFirst `amazon-web-services::us-east-1`}}"
	tags   = {{or .InstanceTagsFirst `["terraform"]`}}
	vpc_id = {{or .VpcIDFirst `cloudamqp_vpc.vpc_first.id`}}
  keep_associated_vpc = true
}

resource "cloudamqp_vpc" "vpc_second" {
  name   = "{{or .VpcNameSecond `TestAccInstanceSecond`}}"
  region = "{{or .VpcRegionSecond `amazon-web-services::us-east-1`}}"
  subnet = "{{or .VpcSubnetSecond `10.56.73.0/24`}}"
  tags   = {{or .VpcTagsSecond `["terraform"]`}}
}

resource "cloudamqp_instance" "instance_second" {
	name   = "{{or .InstanceNameSecond `TestAccInstanceSecond`}}"
	plan   = "{{or .InstancePlanSecond `bunny-1`}}"
	region = "{{or .InstanceRegionSecond `amazon-web-services::us-east-1`}}"
	tags   = {{or .InstanceTagsSecond `["terraform"]`}}
	vpc_id = {{or .VpcIDSecond `cloudamqp_vpc.vpc_second.id`}}
  keep_associated_vpc = true
}
